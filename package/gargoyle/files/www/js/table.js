/*
 * This program is copyright ï¿½ 2008-2010 Eric Bishop and is distributed under the terms of the GNU GPL 
 * version 2.0 with a special clarification/exception that permits adapting the program to 
 * configure proprietary "back end" software provided that all modifications to the web interface
 * itself remain covered by the GPL. 
 * See http://gargoyle-router.com/faq.html#qfoss for more information
 */function createTable(e,t,n,r,s,o,u,a){a=a==null?document:a;var f=a.createElement("table"),l=a.createElement("tbody");f.appendChild(l),f.id=n;var c=a.createElement("tr");c.className="header_row",l.appendChild(c);var h;for(h=0;h<e.length;h++){var p=a.createElement("th");if(typeof e[h]=="string"){var d=e[h].split(/\n/);while(d.length>0){var v=d.shift();p.appendChild(a.createTextNode(v)),d.length>0&&p.appendChild(a.createElement("br"))}}else p.appendChild(e[h]);headerContent=typeof e[h]=="string"?a.createTextNode(e[h]):e[h],c.appendChild(p)}if(r){var p=a.createElement("th");headerContent=a.createTextNode(""),p.appendChild(headerContent),c.appendChild(p)}if(s)for(i=1;i<2;i++){var p=a.createElement("th");headerContent=a.createTextNode(""),p.appendChild(headerContent),c.appendChild(p)}if(t!=null)for(rowIndex in t)addTableRow(f,t[rowIndex],r,s,o,u);return tableSanityCheck(f),f}function addTableRow(e,t,n,r,i,s,o){o=o==null?document:o,i=i==null?function(){}:i,s=s==null?function(){}:s,row=o.createElement("tr"),tableBody=e.firstChild,numRows=tableBody.rows.length,tableBody.appendChild(row),cellIndex=1;while(cellIndex<=t.length){cell=o.createElement("td");if(typeof t[cellIndex-1]=="string"){var u=t[cellIndex-1].split(/\n/);while(u.length>0){var a=u.shift();cell.appendChild(o.createTextNode(a)),u.length>0&&cell.appendChild(o.createElement("br"))}}else cell.appendChild(t[cellIndex-1]);cell.className=e.id+"_column_"+cellIndex,row.appendChild(cell),cellIndex++}n&&(cellContent=createInput("button",o),cellContent.value="Remove",cellContent.className="default_button",cellContent.onclick=function(){row=this.parentNode.parentNode,e=row.parentNode.parentNode,removeThisCellsRow(this),i(e,row)},cell=o.createElement("td"),cell.className=e.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++),r&&(cellContent=createInput("button",o),cellContent.value=String.fromCharCode(8593),cellContent.className="default_button",cellContent.onclick=function(){moveThisCellsRowUp(this),s(this,"up")},cell=o.createElement("td"),cell.className=e.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++,cellContent=createInput("button",o),cellContent.value=String.fromCharCode(8595),cellContent.className="default_button",cellContent.onclick=function(){moveThisCellsRowDown(this),s(this,"down")},cell=o.createElement("td"),cell.className=e.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++),row.className=numRows%2==0?"even":"odd",tableSanityCheck(e)}function removeThisCellsRow(e){row=e.parentNode.parentNode,tableBody=row.parentNode,tableBody.removeChild(row),setRowClasses(tableBody.parentNode,!0)}function moveThisCellsRowUp(e){row=e.parentNode.parentNode,tableBody=row.parentNode,allRows=tableBody.childNodes,rowIndex=1;while(rowIndex<allRows.length&&allRows[rowIndex]!=row)rowIndex++;rowIndex>1&&(tmp=allRows[rowIndex],tableBody.removeChild(allRows[rowIndex]),tableBody.insertBefore(tmp,allRows[rowIndex-1])),setRowClasses(tableBody.parentNode,!0)}function moveThisCellsRowDown(e){row=e.parentNode.parentNode,tableBody=row.parentNode,allRows=tableBody.childNodes,rowIndex=1;while(rowIndex<allRows.length&&allRows[rowIndex]!=row)rowIndex++;rowIndex<allRows.length-1&&allRows.length>2&&(tmp=allRows[rowIndex+1],tableBody.removeChild(allRows[rowIndex+1]),tableBody.insertBefore(tmp,allRows[rowIndex])),setRowClasses(tableBody.parentNode,!0)}function getTableDataArray(e,t,n){numEmptyCells=(t?1:0)+(n?2:0),data=new Array,rows=e.rows,rowIndex=0;while(rowIndex<rows.length){row=rows[rowIndex];if(row.firstChild.tagName.toLowerCase()=="td"){rowData=new Array,cells=row.childNodes,numCells=row.childNodes.length-numEmptyCells,cellNum=0;while(cellNum<numCells)cellContent=cells[cellNum].firstChild,typeof cellContent.data=="string"?rowData.push(cells[cellNum].firstChild.data):rowData.push(cellContent),cellNum++;data.push(rowData)}rowIndex++}return data}function setRowClasses(e,t){rows=e.rows,rows[0].className=t==1?"header_row":"disabled_header_row",rowIndex=1;while(rowIndex<rows.length){t==1?rows[rowIndex].className=rowIndex%2==0?"even":"odd":rows[rowIndex].className=rowIndex%2==0?"disabled_even":"disabled_odd",cells=rows[rowIndex].childNodes;for(cellIndex=0;cellIndex<cells.length;cellIndex++)cellContent=cells[cellIndex].firstChild,cellContent.type=="button"&&(cellContent.disabled=t==0,cellContent.className=t==0?"default_button_disabled":"default_button");rowIndex++}tableSanityCheck(e)}function tableSanityCheck(e){e.style.display=e.rows.length<2?"none":"block"};